"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var pokedexInfo,ALL_POKEMON_INFO="https://pokeapi.co/api/v2/pokemon?limit=151",allPokemons=[],pokedex=[],remainingPokemons=[],listAnswers=[],lifeOptions=[3,5,10],typeLife=JSON.parse(localStorage.getItem("numLife")),randomNumber=function(e){var t=0<arguments.length&&void 0!==e?e:152;return Math.floor(Math.random()*t)},allAnswers=[],currentAnswer="",currentPokeImage="",loader=document.getElementById("loader"),pokeSelect=document.getElementById("poke-select"),imagePokemon=document.getElementById("image-pokemon"),answerOptions=document.getElementById("answer-options"),pokeList=document.getElementById("pokedex-list"),numPokeCatched=document.getElementById("numberPoke"),modalGameCompleted=document.getElementById("game-completed-modal"),gameCompletedCancel=document.getElementById("game-completed-btn-cancel"),gameCompletedRestart=document.getElementById("game-completed-btn-newgame"),headerOptions=document.getElementById("header__options"),menuOpctions=document.getElementById("menu-options"),btnCancelOptionsStep1=document.getElementById("btn-cancel-options-step-1"),btnCancelOptionsStep2=document.getElementById("btn-cancel-options-step-2"),inputDesafios=document.getElementById("input-desafios"),inputOpciones=document.getElementById("input-opciones"),descriptionDesafios=document.getElementById("description-desarios"),descriptionOpciones=document.getElementById("description-opciones"),typeOptions=document.getElementsByName("type-option"),menuOptionsTabs=document.getElementById("menu-options__tabs"),reiniciarButton=document.getElementById("btn-reiniciar"),modalStartGame=document.getElementById("choose-mode"),buttonStartGame=document.getElementById("choose-mode__btn-start"),numberLife=document.getElementById("count-life__number"),modalGameOver=document.getElementById("game-over"),buttonRestartGame=document.getElementById("game-over__btn-restart"),modalNumLife=document.getElementById("count-life"),backgroundModes=document.getElementById("background-modes"),listBackgroundModes=document.getElementsByName("background-mode"),aceptButtonOptionStep1=document.getElementById("btn-acept-options-step-1"),checkPokedex=function(){if(null!=localStorage.getItem("theme")){var t=document.documentElement.style,n=JSON.parse(localStorage.getItem("theme"));Object.keys(n).forEach(function(e){t.setProperty(e,n[e])})}localStorage.getItem("pokedex")?(pokedex=JSON.parse(localStorage.getItem("pokedex")),allPokemons=pokedex.map(function(e){return e.name}),fillRemainingPokemons(),null!=JSON.parse(localStorage.getItem("numLife"))?numberLife.textContent=JSON.parse(localStorage.getItem("numLife")):numberLife.textContent="inf."):(modalStartGame.classList.add("choose-mode__show"),fetch(ALL_POKEMON_INFO).then(function(e){return e.json()}).then(function(e){allPokemons=e.results.map(function(e){return e.name}),pokedex=allPokemons.map(function(e,t){return{id:t+1,name:e,catched:!1}}),localStorage.setItem("pokedex",JSON.stringify(pokedex)),fillRemainingPokemons()}))},fillRemainingPokemons=function(){pokedex.forEach(function(e){e.catched||remainingPokemons.push(e.name)}),createPokedex()},createPokedex=function(){var s=document.createDocumentFragment();pokedex.forEach(function(e){var t=document.createElement("DIV"),n=document.createElement("DIV"),o=document.createElement("IMG"),a=document.createElement("H2"),r=document.createElement("SPAN"),i=document.createElement("DIV");t.classList.add("poke-card"),n.classList.add("poke-card__front"),i.classList.add("poke-card__back"),e.catched&&(t.classList.add("turn-card"),r.classList.add("show-number-pokemon")),t.dataset.pokeId=e.id,o.setAttribute("SRC","https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/".concat(e.id,".svg")),a.textContent="".concat(e.name),r.textContent="".concat(e.id),n.appendChild(a),n.appendChild(o),n.appendChild(r),t.appendChild(n),t.appendChild(i),s.appendChild(t)}),pokeList.appendChild(s),getAnswers()},getAnswers=function(e){var t=0<arguments.length&&void 0!==e?e:3;if(0!==listAnswers.length&&(listAnswers=[]),0===remainingPokemons.length)gameFinished();else{for(listAnswers.push(remainingPokemons[randomNumber(remainingPokemons.length)]);listAnswers.length<t;){var n=allPokemons[randomNumber(allPokemons.length)];listAnswers.includes(n)||listAnswers.push(n)}currentAnswer=listAnswers[0],listAnswers=listAnswers.sort(function(){return Math.random()-.5}),createImage()}},gameFinished=function(){modalGameCompleted.classList.add("game-completed__show"),loader.style.display="none",numberPoke.textContent=allPokemons.length;var e=document.createDocumentFragment(),t=document.createElement("H2");t.textContent="Felicidades por capturar los ".concat(allPokemons.length," pokemons!"),t.classList.add("congratulation-message"),e.appendChild(t),pokeSelect.appendChild(e)},createImage=function(){imagePokemon.setAttribute("SRC","https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/".concat(pokedex.findIndex(function(e){return e.name===currentAnswer})+1,".svg")),imagePokemon.classList.remove("show"),removeLoader()},removeLoader=function(){imagePokemon.addEventListener("load",function(){loader.style.display="none"}),createOptions()},createOptions=function(){answerOptions.textContent="";var n=document.createDocumentFragment();listAnswers.forEach(function(e){var t=document.createElement("LI");t.textContent=e,n.appendChild(t)}),answerOptions.appendChild(n),numberPokemonsCatched()},numberPokemonsCatched=function(){numPokeCatched.textContent=allPokemons.length-remainingPokemons.length},catchPokemon=function(){var e=pokedex.findIndex(function(e){return currentAnswer===e.name})+1,t=remainingPokemons.findIndex(function(e){return currentAnswer===e});remainingPokemons.splice(t,1),pokedex.map(function(e){e.name===currentAnswer&&(e.catched=!0)}),localStorage.setItem("pokedex",JSON.stringify(pokedex)),goToPokemonCatched(e)},goToPokemonCatched=function(e){var t=_toConsumableArray(document.querySelectorAll(".poke-card"))[e-1];setTimeout(function(){pokeList.scrollTo({top:t.offsetTop-100,behavior:"smooth"})},1500),setTimeout(function(){t.classList.add("turn-card"),setTimeout(function(){t.firstElementChild.children[2].classList.add("show-number-pokemon")},2e3)},2e3),removeDarkFilter()},removeDarkFilter=function(){imagePokemon.classList.add("show"),setTimeout(function(){getAnswers()},3e3)},changeSteps=function(){inputDesafios.checked?(descriptionDesafios.classList.remove("menu-options__description-block--hidden"),descriptionOpciones.classList.add("menu-options__description-block--hidden")):(descriptionDesafios.classList.add("menu-options__description-block--hidden"),descriptionOpciones.classList.remove("menu-options__description-block--hidden"))},subtractLives=function(){typeLife--,numberLife.textContent=typeLife,localStorage.setItem("numLife",JSON.stringify(typeLife)),0===typeLife&&modalGameOver.classList.add("game-over__show")};answerOptions.addEventListener("click",function(e){"LI"===e.target.tagName&&(e.target.textContent===currentAnswer?catchPokemon():-1!=JSON.parse(localStorage.getItem("numLife"))&&null!=JSON.parse(localStorage.getItem("numLife"))&&subtractLives())});var themeOriginal={"--blue":"#0063b1","--yellow":"#ffcb00","--darkGrey":"#333","--white":"#f7f7f7","--red":"#e80125","--light-red":"#f08080"},themeGhost={"--blue":"#464646","--yellow":"#949494","--darkGrey":"#000000","--white":"#f7f7f7","--red":"#2D2D2D","--light-red":"#949494"},themeElectric={"--blue":"#FFD726","--yellow":"#000","--darkGrey":"#A9A07A","--white":"#fff","--red":"#FFB400","--light-red":"#A9A07A"},themeFireBall={"--blue":"#FF0000","--yellow":"#ffcb00","--darkGrey":"#808080","--white":"#fff","--red":"#800000","--light-red":"#FF0000"},themeNatura={"--blue":"#148E43","--yellow":"#0D250F","--darkGrey":"#40634E","--white":"#f7f7f7","--red":"#8BB1B4","--light-red":"#148E43"},themeArtico={"--blue":"#00B0BD","--yellow":"#E8FDFF","--darkGrey":"#093D1D","--white":"#f7f7f7","--red":"#093D1D","--light-red":"#00B0BD"},changeTheme=function(e,t){for(var n=document.documentElement.style,o=0,a=Object.keys(e);o<a.length;o++){var r=a[o];n.setProperty(r,e[r])}localStorage.setItem("theme",JSON.stringify(e))};backgroundModes.addEventListener("click",function(e){var t=listBackgroundModes[0].name;if(e.target.name===t)switch(Number(e.target.value)){case 1:changeTheme(themeOriginal,0);break;case 2:changeTheme(themeGhost,1);break;case 3:changeTheme(themeElectric,2);break;case 4:changeTheme(themeFireBall,3);break;case 5:changeTheme(themeNatura,4);break;case 6:changeTheme(themeArtico,5)}}),buttonRestartGame.addEventListener("click",function(){localStorage.removeItem("pokedex"),localStorage.removeItem("numLife"),location.reload()}),buttonStartGame.addEventListener("click",function(){modalStartGame.classList.remove("choose-mode__show"),_toConsumableArray(document.getElementsByName("start-mode-game")).map(function(e){e.checked&&-1!=e.defaultValue?(typeLife=e.defaultValue,localStorage.setItem("numLife",typeLife),numberLife.textContent=typeLife):-1==e.defaultValue&&(numberLife.textContent="inf.")})}),gameCompletedCancel.addEventListener("click",function(){modalGameCompleted.classList.remove("game-completed__show")}),gameCompletedRestart.addEventListener("click",function(){modalGameCompleted.classList.remove("game-completed__show"),localStorage.removeItem("pokedex"),localStorage.removeItem("numLife"),pokeSelect.textContent="",checkPokedex()}),headerOptions.addEventListener("click",function(){menuOpctions.classList.add("menu-options--show"),inputDesafios.checked="true",changeSteps()}),menuOptionsTabs.addEventListener("click",function(){changeSteps()}),btnCancelOptionsStep1.addEventListener("click",function(){menuOpctions.classList.remove("menu-options--show")}),aceptButtonOptionStep1.addEventListener("click",function(){menuOpctions.classList.remove("menu-options--show")}),btnCancelOptionsStep2.addEventListener("click",function(){menuOpctions.classList.remove("menu-options--show")}),reiniciarButton.addEventListener("click",function(){localStorage.removeItem("pokedex"),localStorage.removeItem("numLife"),location.reload(),menuOpctions.classList.remove("menu-options--show")}),checkPokedex();