"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}var pokedexInfo,ALL_POKEMON_INFO="https://pokeapi.co/api/v2/pokemon?limit=151",allPokemons=[],allAnswers=[],currentAnswer="",currentPokeImage="",loader=document.getElementById("loader"),imagePokemon=document.getElementById("image-pokemon"),answerOptions=document.getElementById("answer-options"),pokeList=document.getElementById("pokedex-list"),numPokeCatched=document.getElementById("numberPoke"),getAllPokemons=function(){fetch(ALL_POKEMON_INFO).then(function(e){return e.json()}).then(function(e){if(localStorage.getItem("pokedex"))allPokemons=JSON.parse(localStorage.getItem("pokedex"));else{var n=_toConsumableArray(e.results);allPokemons=n.map(function(e,n){return{name:e.name,id:n+1,catched:!1}}),localStorage.setItem("pokedex",JSON.stringify(allPokemons))}printPokedex(),printNumberPokemonsCatched(),getAnswers()})},pokeLocalStorage=function(t){var e=JSON.parse(localStorage.getItem("pokedex")).find(function(e){var n=e.name;return t===n});console.log(e),allPokemons[e.id-1].catched=!0,localStorage.setItem("pokedex",JSON.stringify(allPokemons)),printNumberPokemonsCatched(),printPokedex()},printNumberPokemonsCatched=function(){var n=[];allPokemons.map(function(e){e.catched&&n.push(e.name)}),numPokeCatched.textContent=n.length},printPokedex=function(){var a=document.createDocumentFragment();pokeList.innerHTML="",allPokemons.forEach(function(e,n){var t=document.createElement("DIV");t.classList.add("poke-card"),t.dataset.pokeId=n+1;var o=document.createElement("DIV");o.classList.add("poke-card__back");var r=document.createElement("DIV");r.classList.add("poke-card__front"),e.catched&&(o.style.backgroundColor="red"),t.appendChild(o),t.appendChild(r),a.appendChild(t)}),pokeList.appendChild(a)},randomNumber=function(e,n){var t=0<arguments.length&&void 0!==e?e:151,o=1<arguments.length&&void 0!==n?n:1;return Math.floor(Math.random()*(t-o))+o},getAnswers=function(e){var n=0<arguments.length&&void 0!==e?e:3;hidePokeSelector();var t=allPokemons[randomNumber()];for(currentAnswer=t.name,currentPokeImage=t.id,(allAnswers=[]).push(currentAnswer);allAnswers.length<n;)allAnswers.find(function(e){var n=e.name;return allPokemons[randomNumber()].name!=n})&&allAnswers.push(allPokemons[randomNumber()].name);printImage(currentPokeImage),imagePokemon.addEventListener("load",function(e){showPokeSelect(),printAnswer()})},hidePokeSelector=function(){loader.classList.remove("hiden"),imagePokemon.classList.add("hiden"),answerOptions.classList.add("hiden")},showPokeSelect=function(){loader.classList.add("hiden"),imagePokemon.classList.remove("hiden"),answerOptions.classList.remove("hiden")},printImage=function(e){fetch("https://pokeapi.co/api/v2/pokemon/".concat(e,"/")).then(function(e){return e.json()}).then(function(e){return imagePokemon.src=e.sprites.other.dream_world.front_default})},printAnswer=function(){allAnswers=allAnswers.sort(function(){return Math.random()-.5});var e=document.createDocumentFragment(),n=!0,t=!1,o=void 0;try{for(var r,a=allAnswers[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value,l=document.createElement("LI");l.textContent=s,e.append(l)}}catch(e){t=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw o}}answerOptions.textContent="",answerOptions.append(e)},goToPokemonCatched=function(t){var e=allPokemons.find(function(e){var n=e.name;return t===n}).id,n=_toConsumableArray(document.querySelectorAll(".poke-card"))[e-1];pokeList.scrollTo({top:n.offsetTop-100,behavior:"smooth"})};getAllPokemons(),answerOptions.addEventListener("click",function(e){return e.target.textContent===currentAnswer?(imagePokemon.classList.add("show"),goToPokemonCatched(currentAnswer),setTimeout(function(){imagePokemon.classList.remove("show"),getAnswers(),pokeLocalStorage(currentAnswer)},2e3)):console.log("INCORRECTO")});